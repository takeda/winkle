program:
  services-config: services.yaml
  config-dir: config.d
  rack: ae-d

sinks:
  haproxy:
    service:
      config: services/haproxy.cfg
      pid-file: services/haproxy.pid
      check-config: services/haproxy -c -f {config}
      status: kill -20 $(cat {pidfile})
      start: services/haproxy -D -f {config} -p {pidfile}
      reload: services/haproxy -D -f {config} -p {pidfile} -sf $(cat {pidfile})
      socket: /tmp/haproxy.sock
      state-file: services/haproxy.state
    global:
      - stats socket /tmp/haproxy.sock mode 660 level admin
      - server-state-file services/haproxy.state
    services:
      - riak-suanpan-pb:
          minimum: 2
      - riak-quality-http
      - ads-thrift:
          rack-aware: True
          minimum: 2
#      - frequency-thrift
